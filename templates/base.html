{% load static %}
<!DOCTYPE html>
<html lang="en">

<head>

    <head>
        <meta charset="utf-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />

        <!-- Bootstrap CSS -->
        <link rel="stylesheet" href="{%static 'css/font-awesome.min.css' %}" />

        <link rel="stylesheet" href="{%static 'css/material-kit.min.css' %}" />
        <link href="{%static 'css/gogcss.css' %}" rel="stylesheet" />
        <link rel="stylesheet" href="{%static 'css/styles.css' %}" />
        <audio src="{%static 'media/finish.mp3'%}" id="my_audio"></audio>
    </head>
    <title>TaskTimer App</title>
</head>

<body>

 <!-- NavBar -->
 {% include 'partials/_navbar.html' %}
   <!-- Main Content -->
 {% block content %} {% endblock %}
 <!-- Footer -->
 {% include 'partials/_footer.html' %}
 <script src="{%static 'js/jquery-3.3.1.slim.min.js' %}"></script>
 <script src="{%static 'js/bootstrap.min.js' %}"></script>
 <script src="{%static 'js/popper.min.js' %}"></script>
 

<script src="{% static 'js/progressbar.min.js' %}"></script>
<script>
 // document.getElementById('duration_counter_{{task_id}}').setText("ASdfas")
 function timer() {
     var duration_min = '{{task_duration}}'
     var duration_milli = '{{task_duration}}' * 1000 * 60
     var id = 'duration_counter_{{task_id}}'
     var e = document.getElementById(id);
     $(e).empty();
     // $(e).addClass('progress-bar')
     console.log(duration_milli)
     var bar = new ProgressBar.Line(e, {
         strokeWidth: 4,
         easing: 'easeInOut',
         duration: duration_milli,
         color: '#FFEA82',
         trailColor: '#eee',
         trailWidth: 1,
         svgStyle: {
             width: '78%',
             height: '100%'
         },
         text: {
             style: {
                 // Text color.
                 // Default: same as stroke color (options.color)
                 color: 'rgb(0, 68, 255)',
                 position: 'relative',
                 align: 'center',
                 left: '55px',

                 //   top: '20px',
                 padding: 0,
                 margin: 0,
                 transform: null
             },
             autoStyleContainer: false
         },

         from: {
             color: 'rgb(0,255,0)'
         },
         to: {
             color: 'rgb(255,0,0)'
         },
         step: (state, bar) => {
             bar.path.setAttribute('stroke', state.color);
             bar.setText(Math.round(bar.value() * 100) + ' %' + " *************************" + (
                     duration_min - (bar.value() * duration_min)).toFixed(2) +
                 '  minutes remaining');
             // bar.setText(bar.value()*duration/1000);
         }
     });

     bar.animate(1.0);
     setTimeout(function () {
         document.getElementById("my_audio").play();
     }, duration_milli);
 };
</script>


</body>

</html>